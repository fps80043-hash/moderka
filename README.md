# Moderation Bot

Телеграм-бот для модерации групп с двумя интерфейсами: кнопки и команды.

## Установка

```bash
pip install -r requirements.txt
```

## Настройка

Открой `config.py` и укажи:

1. **BOT_TOKEN** — токен бота от @BotFather
2. **PERPLEXITY_API_KEY** — ключ API Perplexity (для AI модерации)

## Запуск

```bash
python main.py
```

## Первый запуск

1. Запусти бота
2. Напиши `/start` в ЛС боту — выбери интерфейс
3. Назначь себя владельцем:
   - В `config.py` установи `ROLE_OWNER = 3`
   - Или в БД вручную: `UPDATE users SET role = 3 WHERE user_id = ТВОЙ_ID`
4. Добавь бота в группу (с правами администратора!)
5. Напиши что-нибудь в группе — чат зарегистрируется автоматически

## Роли

| Уровень | Роль | Возможности |
|---------|------|-------------|
| 0 | Пользователь | Профиль, топ, репорты |
| 1 | Модератор | Бан, мут, варн, управление чатами |
| 2 | Администратор | Всё выше + назначение ролей |
| 3 | Владелец | Полный доступ |

## Интерфейсы

### Кнопки
- Главное меню с разделами
- Пошаговый выбор действий
- Выбор длительности кнопками
- Пагинация списков

### Команды
Все те же функции через текстовые команды.

**Важно:** если выбран интерфейс **Кнопки**, команды в ЛС отключены (чтобы не было "двух интерфейсов сразу").
Переключение: ⚙️ Настройки → ⌨️ Команды.

## Функции модерации чатов

- **Режим чтения** — никто кроме модераторов не может писать
- **Антиспам** — автоварны и мут за флуд
- **Фильтр слов** — автоудаление сообщений с запрещёнными словами
- **AI-модерация** — автоматический анализ сообщений через Perplexity

## Формат времени (для команд)

- `5m` — 5 минут
- `2h` — 2 часа
- `1d` — 1 день
- `7d` — 7 дней
- `1y` — 1 год
- `0` — навсегда

# üîµ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –±–æ—Ç v6.0 ‚Äî –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (v5.1 ‚Üí v6.0)

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–∞–Ω —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ú–ì–ù–û–í–ï–ù–ù–û** ‚Äî –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ gban –±–æ—Ç —Å—Ä–∞–∑—É –≤—ã–∑—ã–≤–∞–µ—Ç `ban_chat_member` –≤–æ –í–°–ï–• –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞—Ö, –∞ –Ω–µ –∂–¥—ë—Ç –ø–æ–∫–∞ —é–∑–µ—Ä —á—Ç–æ-—Ç–æ –Ω–∞–ø–∏—à–µ—Ç
- **Username –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª—Å—è** ‚Äî —É–ª—É—á—à–µ–Ω `resolve_username`: –∫—ç—à –ø–æ `user_id` –∫–∞–∫ PK, fallback —á–µ—Ä–µ–∑ `bot.get_chat(@username)`, –∞–≤—Ç–æ–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —á–∞—Ç
- **RO mode** ‚Äî –∫–æ–ª–æ–Ω–∫–∞ `ro_mode` —Ç–µ–ø–µ—Ä—å –≤ —Å—Ö–µ–º–µ –ë–î —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ (–Ω–µ —á–µ—Ä–µ–∑ ALTER TABLE)
- **–§–æ—Ä–º–∞—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω `format_duration()`, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∏–Ω—É—Ç—ã/—á–∞—Å—ã/–¥–Ω–∏
- **unban** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `only_if_banned=True` —á—Ç–æ–±—ã –Ω–µ –≤—ã–∫–∏–¥—ã–≤–∞—Ç—å —é–∑–µ—Ä–∞ –∏–∑ —á–∞—Ç–∞ –ø—Ä–∏ —Ä–∞–∑–±–∞–Ω–µ

### üÜï –ù–æ–≤—ã–µ —Ñ–∏—á–∏
- **`/help` ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞–º–∏**: –≤—ã–±–∏—Ä–∞–µ—à—å –∫–æ–º–∞–Ω–¥—É ‚Üí –≤–∏–¥–∏—à—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ ¬´–ù–∞–∑–∞–¥¬ª
- **–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏**: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (–≤–∞—Ä–Ω, –º—É—Ç, –±–∞–Ω, –∫–∏–∫, —Ä–∞–∑–±–∞–Ω) –≤–Ω–∏–∑—É –∫–Ω–æ–ø–∫–∏ –¥–ª—è follow-up –¥–µ–π—Å—Ç–≤–∏–π
- **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–∑ `/stats`**: –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —é–∑–µ—Ä–∞ ‚Äî –∫–Ω–æ–ø–∫–∏ ¬´–í–∞—Ä–Ω¬ª, ¬´–ú—É—Ç¬ª, ¬´–ö–∏–∫¬ª, ¬´–ë–∞–Ω¬ª, ¬´–ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–∞–Ω¬ª –ø—Ä—è–º–æ –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π
- **`/ungban` —Ä–∞–∑–±–∞–Ω–∏–≤–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö** ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–Ω–∏–º–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î, –∞ –¥–µ–ª–∞–µ—Ç `unban_chat_member` –≤–æ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞—Ö
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —Ä–∞–∑ –≤ —á–∞—Å —á–∏—Å—Ç–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏

### üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫—ç—à–∞ –¥–µ–π—Å—Ç–≤–∏–π** (`action_cache`) –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã `warn_reason_cache` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ reason/caller –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–æ–π –∏ callback
- **`username_cache` –ø–æ `user_id` –∫–∞–∫ PK** ‚Äî –æ–¥–∏–Ω —é–∑–µ—Ä = –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å, –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- **PRAGMA WAL + busy_timeout** ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ —Ä–∞–±–æ—Ç–∞ —Å SQLite –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- **–ß–∏—Å—Ç—ã–π –∫–æ–¥** ‚Äî —É–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –µ–¥–∏–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –í—Å—Ç–∞–≤—å —Ç–æ–∫–µ–Ω –≤ `config.json` (`bot_token`)
2. –£–∫–∞–∂–∏ ID —á–∞—Ç–æ–≤ –≤ `moderated_chats` 
3. –£–∫–∞–∂–∏ ID —Å—Ç–∞—Ñ—Ñ-—é–∑–µ—Ä–æ–≤ –≤ `preset_staff`

```bash
# –ù–∞–ø—Ä—è–º—É—é
pip install -r requirements.txt
python main.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose up -d --build
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–π
| –£—Ä–æ–≤–µ–Ω—å | –†–æ–ª—å | –î–æ—Å—Ç—É–ø |
|---------|------|--------|
| 0 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | ‚Äî |
| 1-2 | –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä | warn, mute, kick, ro, clear, setnick |
| 3-6 | –°—Ç–∞—Ä—à–∏–π –º–æ–¥ | + ban, unban |
| 7-10 | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | + gban, setrole, removerole |
